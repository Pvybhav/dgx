{
  "$jason": {
    "head": {
      "title": "Screen-2",
      "description": "CIP Checklist",
      "offline": "true",
      "styles": {
        "no_padding": {
          "padding": "0"
        },
        "no_border": {
          "border": "none"
        },
        "center_align": {
          "align": "center"
        },
        "black_color": {
          "color": "rgb(0,0,0)"
        },
        "table_header_name_styles": {
          "width": "20%",
          "border": "rgb(255, 255, 255)"
        },
        "table_header_description_styles": {
          "width": "25%",
          "border": "rgb(255, 255, 255)"
        },
        "table_header_value_styles": {
          "width": "16%",
          "border": "rgb(255, 255, 255)"
        },
        "table_row_height": {
          "height": "6%"
        },
        "table_body_name_styles": {
          "width": "20%"
        },
        "table_body_description_styles": {
          "width": "25%"
        },
        "table_body_value_styles": {
          "width": "16%"
        },
        "label_styles": {
          "font": "HelveticaNeue-Bold",
          "width": "3%"
        },
        "table_header_styles": {
          "size": 15,
          "font": "HelveticaHeader-Bold",
          "background": "rgb(14, 53, 112)",
          "color": "rgb(255, 255, 255)",
          "border": "rgb(255, 255, 255)",
          "height": "6%",
          "padding_top": "1%",
          "padding_bottom": "1%"
        },
        "table_odd_row_styles": {
          "background": "rgb(204,206,213)"
        },
        "table_even_row_styles": {
          "background": "rgb(231,232,235)"
        },
        "table_fields_size": {
          "size": "16"
        },
        "button_styles": {
          "width": "15%",
          "height": "7%",
          "color": "rgb(255,255,255)",
          "background": "rgb(0,147,215)",
          "corner_radius": "1%",
          "align": "center"
        },
        "switch_styles": {
          "color": "rgb(0,255,0)",
          "color:disabled": "rgb(255,0,0)",
          "align": "center"
        }
      },
      "data": {
        "Page_Heading": "CIP Report",
        "Table_Headers": [
          {
            "type": "label",
            "value": "Detox O/F",
            "col_type": "col_name",
            "styles": "table_header_styles table_header_name_styles"
          },
          {
            "type": "label",
            "value": "Running",
            "col_type": "col_value",
            "styles": "table_header_styles table_header_value_styles"
          },
          {
            "type": "label",
            "value": "Valves",
            "col_type": "col_value",
            "styles": "table_header_styles table_header_value_styles"
          },
          {
            "type": "label",
            "value": "Gland m3/hr",
            "col_type": "col_value",
            "styles": "table_header_styles table_header_value_styles"
          },
          {
            "type": "label",
            "value": "Packing",
            "col_type": "col_value",
            "styles": "table_header_styles table_header_value_styles"
          },
          {
            "type": "label",
            "value": "Oil Level",
            "col_type": "col_value",
            "styles": "table_header_styles table_header_value_styles"
          }
        ],
        "Table_Rows": [
          {
            "row_name": "Pump 002",
            "row_values": [
              {
                "type": "textfield",
                "name": "detox_OF_pump002_running",
                "label": "1",
                "contentDescription": "one"
              },
              {
                "type": "textfield",
                "name": "detox_OF_pump002_valves",
                "label": "2",
                "contentDescription": "two"
              },
              {
                "type": "textfield",
                "name": "detox_OF_pump002_gland_m3hr",
                "label": "3",
                "contentDescription": "three"
              },
              {
                "type": "textfield",
                "name": "detox_OF_pump002_packing",
                "label": "4",
                "contentDescription": "four"
              },
              {
                "type": "textfield",
                "name": "detox_OF_pump002_oil_level",
                "label": "5",
                "contentDescription": "five"
              }
            ]
          },
          {
            "row_name": "Pump 003",
            "row_values": [
              {
                "type": "textfield",
                "name": "detox_OF_pump003_running",
                "label": "6",
                "contentDescription": "six"
              },
              {
                "type": "textfield",
                "name": "detox_OF_pump003_valves",
                "label": "7",
                "contentDescription": "seven"
              },
              {
                "type": "textfield",
                "name": "detox_OF_pump003_gland_m3hr",
                "label": "8",
                "contentDescription": "eight"
              },
              {
                "type": "textfield",
                "name": "detox_OF_pump003_packing",
                "label": "9",
                "contentDescription": "nine"
              },
              {
                "type": "textfield",
                "name": "detox_OF_pump003_oil_level",
                "label": "10",
                "contentDescription": "ten"
              }
            ]
          }
        ]
      },
      "actions": {
        "$load": {
          "type": "$script.include",
          "options": {
            "items": [
              {
                "text": "var getCurrentFieldValue = function(root, id, globalValues) {  for (var key in globalValues) { if(globalValues.hasOwnProperty(id)) return globalValues[id]; };}"
              }
            ]
          },
          "success": {
            "type": "$render",
            "success": {
              "type": "$util.toast",
              "options": {
                "text": "Page loaded successfully",
                "type": "warning"
              }
            }
          }
        },
        "$pull": {
          "type": "$reload"
        },
        "handleSave": {
          "type": "$global.set",
          "options": {
            "section_id": "form9_page3",
            "detox_OF_pump002_running": "{{ $get.detox_OF_pump002_running }}",
            "detox_OF_pump002_valves": "{{ $get.detox_OF_pump002_valves }}",
            "detox_OF_pump002_gland_m3hr": "{{ $get.detox_OF_pump002_gland_m3hr }}",
            "detox_OF_pump002_packing": "{{ $get.detox_OF_pump002_packing }}",
            "detox_OF_pump002_oil_level": "{{ $get.detox_OF_pump002_oil_level }}",
            "detox_OF_pump003_running": "{{ $get.detox_OF_pump003_running }}",
            "detox_OF_pump003_valves": "{{ $get.detox_OF_pump003_valves }}",
            "detox_OF_pump003_gland_m3hr": "{{ $get.detox_OF_pump003_gland_m3hr }}",
            "detox_OF_pump003_packing": "{{ $get.detox_OF_pump003_packing }}",
            "detox_OF_pump003_oil_level": "{{ $get.detox_OF_pump003_oil_level }}",
            "f9_s4_notifications": "{{ $get.notifications || '' }}",
            "f9_s4_comments": "{{ $get.comments || '' }}"
          },
          "success": {
            "type": "$util.toast",
            "options": {
              "text": "Saved Successfully",
              "type": "warning"
            }
          }
        },
        "handleSubmit": {
          "type": "$global.reset",
          "options": {
            "save": "true",
            "filename": "CIPChecklist"
          },
          "success": {
            "type": "$global.reset",
            "options": {
              "items": [
                "section_id",
                "f9_s1_sign",
                "f9_s1_day",
                "f9_s1_month",
                "f9_s1_year",
                "f9_s1_shift",
                "f9_s1_operator",
                "safety_screen_holed_0640_M221_001",
                "safety_screen_blinded_0640_M221_001",
                "safety_screen_clean_0640_M221_001",
                "safety_screen_good_0640_M221_001",
                "safety_screen_holed_0640_M221_002",
                "safety_screen_blinded_0640_M221_002",
                "safety_screen_clean_0640_M221_002",
                "safety_screen_good_0640_M221_002",
                "derrrick_screen_holed_0640_M221_101",
                "derrrick_screen_blinded_0640_M221_101",
                "derrrick_screen_clean_0640_M221_101",
                "derrrick_screen_good_0640_M221_101",
                "derrick_screen_holed_0640_M221_102",
                "derrick_screen_blinded_0640_M221_102",
                "derrick_screen_clean_0640_M221_102",
                "derrick_screen_good_0640_M221_102",
                "derrick_screen_holed_0640_M221_201",
                "derrick_screen_blinded_0640_M221_201",
                "derrick_screen_clean_0640_M221_201",
                "derrick_screen_good_0640_M221_201",
                "derrick_screen_holed_0640_M221_202",
                "derrick_screen_blinded_0640_M221_202",
                "derrick_screen_clean_0640_M221_202",
                "derrick_screen_good_0640_M221_202",
                "secondary_safety_screen_holed_0640_M221_011",
                "secondary_safety_screen_blinded_0640_M221_011",
                "secondary_safety_screen_clean_0640_M221_011",
                "secondary_safety_screen_good_0640_M221_011",
                "secondary_safety_screen_holed_0640_M221_012",
                "secondary_safety_screen_blinded_0640_M221_012",
                "secondary_safety_screen_clean_0640_M221_012",
                "secondary_safety_screen_good_0640_M221_012",
                "detox_UF_pumps_pump001_running",
                "detox_UF_pumps_pump001_valves",
                "detox_UF_pumps_pump001_gland_m3hr",
                "detox_UF_pumps_pump001_packing",
                "detox_UF_pumps_pump001_oil_level",
                "detox_UF_pumps_pump021_running",
                "detox_UF_pumps_pump021_valves",
                "detox_UF_pumps_pump021_gland_m3hr",
                "detox_UF_pumps_pump021_packing",
                "detox_UF_pumps_pump021_oil_level",
                "detox_UF_pumps_pump041_running",
                "detox_UF_pumps_pump041_valves",
                "detox_UF_pumps_pump041_gland_m3hr",
                "detox_UF_pumps_pump041_packing",
                "detox_UF_pumps_pump041_oil_level",
                "detox_UF_pumps_sump_pump001_running",
                "detox_UF_pumps_sump_pump001_valves",
                "detox_UF_pumps_sump_pump001_gland_m3hr",
                "detox_UF_pumps_sump_pump001_packing",
                "detox_UF_pumps_sump_pump001_oil_level",
                "detox_UF_pumps_sump_pump002_running",
                "detox_UF_pumps_sump_pump002_valves",
                "detox_UF_pumps_sump_pump002_gland_m3hr",
                "detox_UF_pumps_sump_pump002_packing",
                "detox_UF_pumps_sump_pump002_oil_level",
                "CIP_tails_pump_001_running",
                "CIP_tails_pump_001_valves",
                "CIP_tails_pump_001_gland_m3hr",
                "CIP_tails_pump_001_packing",
                "CIP_tails_pump_001_oil_level",
                "CIP_tails_pump_011_running",
                "CIP_tails_pump_011_valves",
                "CIP_tails_pump_011_gland_m3hr",
                "CIP_tails_pump_011_packing",
                "CIP_tails_pump_011_oil_level",
                "CIP_tails_pump_012_running",
                "CIP_tails_pump_012_valves",
                "CIP_tails_pump_012_gland_m3hr",
                "CIP_tails_pump_012_packing",
                "CIP_tails_pump_012_oil_level",
                "CIP_tails_clean_pump_box_level_probe_running",
                "CIP_tails_clean_pump_box_level_probe_valves",
                "CIP_tails_clean_pump_box_level_probe_gland_m3hr",
                "CIP_tails_clean_pump_box_level_probe_packing",
                "CIP_tails_clean_pump_box_level_probe_oil_level",
                "final_tails_pump001_running",
                "final_tails_pump001_valves",
                "final_tails_pump001_gland_m3hr",
                "final_tails_pump001_packing",
                "final_tails_pump001_oil_level",
                "final_tails_pump002_running",
                "final_tails_pump002_valves",
                "final_tails_pump002_gland_m3hr",
                "final_tails_pump002_packing",
                "final_tails_pump002_oil_level",
                "final_tails_pump021_running",
                "final_tails_pump021_valves",
                "final_tails_pump021_gland_m3hr",
                "final_tails_pump021_packing",
                "final_tails_pump021_oil_level",
                "final_tails_pump022_running",
                "final_tails_pump022_valves",
                "final_tails_pump022_gland_m3hr",
                "final_tails_pump022_packing",
                "final_tails_pump022_oil_level",
                "final_tails_pump041_running",
                "final_tails_pump041_valves",
                "final_tails_pump041_gland_m3hr",
                "final_tails_pump041_packing",
                "final_tails_pump041_oil_level",
                "final_tails_pump042_running",
                "final_tails_pump042_valves",
                "final_tails_pump042_gland_m3hr",
                "final_tails_pump042_packing",
                "final_tails_pump042_oil_level",
                "final_tails_clean_pump_box_level_probe_running",
                "final_tails_clean_pump_box_level_probe_valves",
                "final_tails_clean_pump_box_level_probe_gland_m3hr",
                "final_tails_clean_pump_box_level_probe_packing",
                "final_tails_clean_pump_box_level_probe_oil_level",
                "reclaim_pumps_pump_010_running",
                "reclaim_pumps_pump_010_valves",
                "reclaim_pumps_pump_010_gland_m3hr",
                "reclaim_pumps_pump_010_packing",
                "reclaim_pumps_pump_010_oil_level",
                "reclaim_pumps_pump_011_running",
                "reclaim_pumps_pump_011_valves",
                "reclaim_pumps_pump_011_gland_m3hr",
                "reclaim_pumps_pump_011_packing",
                "reclaim_pumps_pump_011_oil_level",
                "reclaim_pumps_pump_012_running",
                "reclaim_pumps_pump_012_valves",
                "reclaim_pumps_pump_012_gland_m3hr",
                "reclaim_pumps_pump_012_packing",
                "reclaim_pumps_pump_012_oil_level",
                "detox_OF_pump002_running",
                "detox_OF_pump002_valves",
                "detox_OF_pump002_gland_m3hr",
                "detox_OF_pump002_packing",
                "detox_OF_pump002_oil_level",
                "detox_OF_pump003_running",
                "detox_OF_pump003_valves",
                "detox_OF_pump003_gland_m3hr",
                "detox_OF_pump003_packing",
                "detox_OF_pump003_oil_level",
                "f9_s4_notifications",
                "f9_s4_comments"
              ]
            },
            "success": {
              "type": "$util.toast",
              "options": {
                "text": "Data Submitted successfully",
                "type": "warning"
              }
            }
          }
        }
      },
      "templates": {
        "body": {
          "header": {
            "title": {
              "type": "label",
              "text": "{{Page_Heading}}"
            },
            "style": {
              "align": "center",
              "font": "HelveticaNeue-Bold",
              "size": 20,
              "background": "rgb(146, 208, 80)",
              "color": "rgb(255,255,255)"
            }
          },
          "sections": [
            {
              "type": "horizontal",
              "items": [
                {
                  "type": "vertical",
                  "class": "no_padding",
                  "components": [
                    {
                      "type": "horizontal",
                      "components": {
                        "{{#each Table_Headers}}": {
                          "type": "label",
                          "text": "{{value}}",
                          "class": "{{styles}} center_align"
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "vertical",
              "items": [
                {
                  "type": "vertical",
                  "class": "no_padding",
                  "components": [
                    {
                      "type": "vertical",
                      "components": {
                        "{{#each Table_Rows}}": {
                          "{{#let}}": [
                            {
                              "row_index": "{{$index}}"
                            },
                            {
                              "type": "horizontal",
                              "class": "center_align table_row_height {{row_index%2 == 0 ? 'table_even_row_styles' : 'table_odd_row_styles'}}",
                              "style": {
                                "height": "6%"
                              },
                              "components": [
                                {
                                  "type": "horizontal",
                                  "class": "table_body_name_styles",
                                  "components": [
                                    {
                                      "type": "label",
                                      "text": "{{var current_field_name = $root.Table_Rows[$index].row_name; return current_field_name;}}",
                                      "class": "center_align black_color table_body_name_styles"
                                    }
                                  ]
                                },
                                {
                                  "type": "horizontal",
                                  "components": {
                                    "{{#each row_values}}": {
                                      "type": "horizontal",
                                      "components": [
                                        {
                                          "type": "vertical",
                                          "style": {
                                            "width": "3%"
                                          },
                                          "components": [
                                            {
                                              "type": "label",
                                              "text": "{{label}}",
                                              "class": "label_styles black_color center_align"
                                            }
                                          ]
                                        },
                                        {
                                          "type": "vertical",
                                          "style": {
                                            "width": "13%"
                                          },
                                          "components": [
                                            {
                                              "type": "{{type}}",
                                              "name": "{{name}}",
                                              "value": "{{var index = $index; return getCurrentFieldValue(index, $root.Table_Rows[row_index].row_values[$index].name, $root['$global']) || '';}}",
                                              "class": "center_align black_color",
                                              "contentDescription": "{{contentDescription}}",
                                              "style": {
                                                "width": "13%",
                                                "height": "4%",
                                                "size": "14"
                                              }
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  }
                                }
                              ]
                            }
                          ]
                        }
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "horizontal",
              "items": [
                {
                  "type": "horizontal",
                  "class": "no_padding",
                  "components": [
                    {
                      "type": "label",
                      "text": "Notifications",
                      "class": "table_header_styles",
                      "style": {
                        "width": "100%"
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "horizontal",
              "items": [
                {
                  "type": "horizontal",
                  "class": "no_padding",
                  "components": [
                    {
                      "type": "textarea",
                      "name": "notifications",
                      "value": "{{$global.f9_s4_notifications || ''}}",
                      "placeholder": "Enter Notifications",
                      "contentDescription": "notifications",
                      "style": {
                        "width": "100%",
                        "height": "15%",
                        "size": "15"
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "horizontal",
              "items": [
                {
                  "type": "horizontal",
                  "class": "no_padding",
                  "components": [
                    {
                      "type": "label",
                      "text": "Comments",
                      "class": "table_header_styles",
                      "style": {
                        "width": "100%"
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "horizontal",
              "items": [
                {
                  "type": "horizontal",
                  "components": [
                    {
                      "type": "textarea",
                      "name": "comments",
                      "value": "{{$global.f9_s4_comments || ''}}",
                      "placeholder": "Enter Comments",
                      "contentDescription": "comments",
                      "style": {
                        "width": "100%",
                        "height": "15%",
                        "size": "15"
                      }
                    }
                  ],
                  "class": "no_padding"
                }
              ]
            },
            {
              "type": "horizontal",
              "items": [
                {
                  "type": "horizontal",
                  "class": "no_padding center_align",
                  "style": {
                    "padding_top": "1%",
                    "padding_bottom": "1%"
                  },
                  "components": [
                    {
                      "type": "space",
                      "style": {
                        "width": "20%"
                      }
                    },
                    {
                      "type": "button",
                      "name": "previous",
                      "text": "Previous",
                      "class": "button_styles",
                      "action": {
                        "type": "$href",
                        "options": {
                          "url": "https://s3.amazonaws.com/enu-digital-ips/development/9_CIPChecklist/screen_3.json",
                          "preload": {
                            "style": {
                              "background": "#ff0000"
                            },
                            "layers": [
                              {
                                "type": "image",
                                "url": "file://infinit.gif",
                                "style": {
                                  "top": "50%-25",
                                  "left": "50%-25",
                                  "width": "50",
                                  "height": "50"
                                }
                              }
                            ]
                          }
                        }
                      }
                    },
                    {
                      "type": "space",
                      "style": {
                        "width": "5%"
                      }
                    },
                    {
                      "type": "button",
                      "name": "home",
                      "text": "Home",
                      "class": "button_styles",
                      "action": {
                        "type": "$href",
                        "options": {
                          "url": "https://s3.amazonaws.com/enu-digital-ips/development/home.json",
                          "preload": {
                            "style": {
                              "background": "#ff0000"
                            },
                            "layers": [
                              {
                                "type": "image",
                                "url": "file://infinit.gif",
                                "style": {
                                  "top": "50%-25",
                                  "left": "50%-25",
                                  "width": "50",
                                  "height": "50"
                                }
                              }
                            ]
                          }
                        }
                      }
                    },
                    {
                      "type": "space",
                      "style": {
                        "width": "5%"
                      }
                    },
                    {
                      "type": "button",
                      "name": "save",
                      "text": "Save",
                      "class": "button_styles",
                      "action": {
                        "trigger": "handleSave"
                      }
                    },
                    {
                      "type": "space",
                      "style": {
                        "width": "5%"
                      }
                    },
                    {
                      "type": "button",
                      "name": "submit",
                      "text": "submit",
                      "class": "button_styles",
                      "contentDescription": "submit",
                      "action": {
                        "trigger": "handleSubmit"
                      }
                    },
                    {
                      "type": "space",
                      "style": {
                        "width": "5%"
                      }
                    }
                  ]
                }
              ]
            }
          ]
        }
      }
    }
  }
}